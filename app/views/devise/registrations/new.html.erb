<%- business_id = params[:business_id] || (params[:user] && params[:user][:business_id]) -%>
<%- business = Business.find(business_id) if business_id -%>
<%- email = params[:email] || (params[:user] && params[:user][:email]) -%>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title"><%= business.present?? business.name : '' -%> - Sign up</h3>
      </div>

      <div class="panel-body">
        <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), html: { class: 'form-horizontal' }, defaults: { input_html: { class: 'form-control' }}) do |f| %>
          <div class="form-inputs">
            <%= f.input :email, :required => true, input_html: { value: email.present?? email : '' } %>
            <%= f.input :password, :required => true %>
            <%= f.input :password_confirmation, :required => true %>
            <%- if business -%>
              <%= f.input :business_id, as: :hidden, input_html: { value: business.id, readonly: true } -%>
            <%- end -%>
          </div>

          <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
              <%= f.button :submit, "Sign up", class: 'btn-primary' %>
              <br />
              <%= render "devise/shared/links" %>
            </div>
          </div>
        <% end %>

      </div>
    </div>
  </div>
</div>


<%= content_for :bread_crumbs do -%>
  <div class="dow">
    <div class="col-lg-8 content">
        <div class="bread_crumbs">
          <%= link_to 'Home', front_path -%>
          >
          <%= link_to 'Events', public_events_path -%>
          >
          <%= @event.name -%>
        </div>
        <h1 class="red title_post"><%= @event.name -%></h1>
        <div class="post_entry_meta">
          <div class="date">
            <span></span>
            <%= link_to "#{@event.starts.strftime("%B #{@event.starts.day.ordinalize}, %H%P")} to #{@event.ends.strftime("%B #{@event.ends.day.ordinalize}, %H%P")}", '#' -%>
          </div>
        </div>
    </div>
    <div class="col-lg-4">
    </div>
  </div>
<%- end -%>

<div class="col-lg-8 content">
  <div class="blog">
        <%- if @event.image.present? -%>
          <div class="post_thumbnail">
            <div class="thumbnail">
              <%= image_tag @event.image_url(:big_thumb) -%>
            </div>
          </div>
        <%- end -%>
        <div class="row">
          <div class="event_desc col-lg-6">
            <p><i><b>Location: <span class="blue"><%= "#{@event.location_name} - #{@event.location_address}" -%></span></b></i></p>
            <%=raw @event.description -%>
          </div >

          <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
          <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

          <div class="event_map col-lg-6">
            <div class="thumbnail">
              <div id="map" style='height: 250px;'></div>

              <script type="text/javascript">
                $(document).ready(function() {
                  handler = Gmaps.build('Google', { markers: { maxRandomDistance: null }});
                  handler.buildMap({ provider: { auto_zoom: false, auto_adjust: false }, internal: {id: 'map'}}, function(){
                    markers = handler.addMarkers(<%=raw @hash.to_json -%>);
                    handler.bounds.extendWith(markers);
                    handler.fitMapToBounds();
                  });
                })
              </script>
            </div>
          </div>
        </div>
        <div class="social_shared">
          <span class='st_twitter_vcount' displayText='Tweet'></span>
          <span class='st_facebook_vcount' displayText='Facebook'></span>
          <span class='st_googleplus_vcount' displayText='Google +'></span>
          <span class='st_email_vcount' displayText='Email'></span>
        </div>
  </div>
</div>

<div class="col-lg-4 sidebar">
  <div class="widget">
    <h2 class="red">Upcoming events</h2>
    <div class="widget_recent_posts">
      <div class="recent_post">
        <%- Event.upcoming(5).reject { |e| e.id == @event.id }.each do |e| -%>
          <%= link_to e.name, public_event_path(e), class: 'title' -%>
          <div class="recent_posts_entry_meta">
            <a href="#">> <%= e.starts.strftime("%B #{e.starts.day.ordinalize} %Y") -%></a>
          </div>
        <%- end -%>
      </div>
    </div>
  </div>

  <div class="widget">
    <%= render partial: 'shared/sidebar_socials' -%>
  </div>
</div>
